# Анализ допродаж товаров

Этот скрипт анализирует данные заказов для определения товаров, к которым чаще всего делаются допродажи.

## Что делает скрипт

Анализирует CSV файл с данными заказов и выявляет:

- Какие товары чаще всего присутствуют в заказах с допродажами
- Какие конкретно товары добавляются как допродажи
- Статистику по количеству допродаж для каждого основного товара

## Требования

- Python 3.x
- pandas

## Установка зависимостей

```bash
pip install pandas
```

## Структура входного файла

Скрипт ожидает CSV файл с названием `products.csv` со следующими колонками:

- `№ заказа` - номер заказа
- `Допродажа` - маркер допродажи (пустое поле для основных товаров, "Допродажа" для допродаж)
- `Артикул` - артикул товара
- `Товары` - название товара

### Пример структуры данных:

```csv
№ заказа,Допродажа,Артикул,Товары
12345,,ART001,Кольє "Silver Горлиця", 40 см
12345,Допродажа,ART002,Пакет Подарунковий
12345,Допродажа,ART003,Сережки "Silver Горлиця"
```

## Использование

1. Поместите ваш CSV файл в ту же папку, что и скрипт, и назовите его `products.csv`

2. Запустите скрипт:

```bash
python index.py
```

3. Скрипт создаст файл `upsell_analysis.csv` с результатами анализа

## Выходные данные

### Консольный вывод

- Общее количество заказов
- Количество заказов с допродажами
- Топ-10 товаров с наибольшим количеством допродаж

### Файл upsell_analysis.csv

Содержит три колонки:

- **Основной товар** - товар, который уже был в корзине при добавлении допродаж
- **Количество допродаж** - сколько раз к этому товару добавляли допродажи
- **Примеры допродаж** - конкретные товары, которые чаще всего добавляли как допродажи (до 5 уникальных примеров)

## Логика работы

1. **Группировка по заказам**: Данные группируются по номеру заказа
2. **Разделение товаров**: В каждом заказе товары разделяются на:
   - Основные товары (без маркера "Допродажа")
   - Допродажи (с маркером "Допродажа")
3. **Подсчет статистики**: Для каждого основного товара подсчитывается, сколько раз к нему добавляли допродажи
4. **Исключения**: Упаковочные материалы (коробки, пакеты) исключаются из списка основных товаров

## Пример результата

```csv
Основной товар,Количество допродаж,Примеры допродаж
"Кольє ""Silver Горлиця"", 40 см",48,"Пакет Подарунковий; Браслет ""Silver Горлиця"", 16 см; Сережки ""Silver Горлиця"""
"Кольє ""Lilly"", 36 см",39,"Пакет Подарунковий; Каблучка ""Shine Pearl""; Браслет ""Lilly"", 16 см"
```

## Применение результатов

Полученные данные можно использовать для:

- **Настройки рекомендательных систем** - предлагать наиболее популярные допродажи
- **Планирования маркетинговых кампаний** - фокусироваться на товарах с высоким потенциалом допродаж
- **Управления ассортиментом** - понимать, какие товары работают в связке
- **Анализа покупательского поведения** - выявлять паттерны покупок

## Структура проекта

```
├── index.py              # Основной скрипт анализа
├── products.csv          # Входные данные (создается пользователем)
├── upsell_analysis.csv   # Результаты анализа (создается скриптом)
└── README.md            # Документация
```
